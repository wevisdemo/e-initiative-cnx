---
import Config from '../../../e-initiative.config.mjs';
import SectionContainer from '../SectionContainer.astro';
import UpdateTimestamp from '../UpdateTimestamp.svelte';
import PenIcon from '../icons/PenIcon.svelte';
import LocationIcon from '../icons/LocationIcon.svelte';
import TableIcon from '../icons/TableIcon.svelte';
import { dayElapsed, isCampaignEnded } from '../../utils/campaign';
import { countSubmittedDocuments } from '../../utils/firebase';
import { countOfflineSignatures } from '../../utils/sheets';
import Sharer from '../Sharer.svelte';

const documentCount =
	(await countSubmittedDocuments()) +
	(Config.sheets?.enableOfflineSignature ? await countOfflineSignatures() : 0);
---

<SectionContainer
	outerClass="min-h-screen justify-center bg-[#03C038]"
	innerClass="flex flex-col gap-10 text-center"
	hideNavbar
>
	<div
		class="relative flex h-[320px] w-[498px] flex-col items-center justify-center"
	>
		<img src="/cover.png" alt="cover" class="h-full w-full" />
		<span class="body-01 absolute bottom-0 font-semibold">
			ร่วมกันปลดล็อคให้เชียงใหม่จัดการตนเองโดยไม่จำเป็นต้องรอรัฐส่วนกลางอีกต่อไป
		</span>
	</div>
	<div class="flex flex-col gap-3">
		<a href="#sign">
			<img
				src="/regist.png"
				alt="regist"
				class="h-full w-full cursor-pointer"
			/>
		</a>
		<div class="flex flex-col">
			<p class="heading-responsive-02 text-base-100">
				ลงแล้ว {documentCount.toLocaleString()} คน
			</p>
			<UpdateTimestamp />
			<p class="body-03-normal">
				ต้องการ {Config.petition.expectedSignatures.toLocaleString()} รายชื่อ ภายใน
				{
					Config.petition.endDate.toLocaleDateString('TH-th', {
						dateStyle: 'medium',
					})
				}
			</p>
		</div>
		<div class="flex items-center justify-center gap-3 text-accent">
			<span class="body-01 text-neutral">แชร์</span>
			<Sharer />
		</div>
	</div>
</SectionContainer>
